(function(){"use strict";var e={6398:function(e,r,t){var n=t(9242),a=t(3396),c=t(4870),s=t(1632),l=t(2578);t(7658);const o=20,i=(0,l.Q_)("CurrenciesStore",{state:()=>({currenciesToSetInTable:["USD","EUR","UAH"],allCurrenciesInTable:["USD","EUR","UAH","BTC","ETH"],currenciesInTable:[],currentCurrency:"USD",allCurrencies:[],chartData:{},ratesForCurrencies:[]}),getters:{getFilteredCurrenciesNames:e=>r=>{const t=e.allCurrencies.filter((t=>t.startsWith(r)&&!e.allCurrenciesInTable.includes(t)));return r.length>2&&t||[]},getCurrenciesToSetInTable:e=>e.currenciesToSetInTable,getAllCurrenciesInTable:e=>e.currenciesInTable,getChartData:e=>e.chartData,getFormattedRatesForCurrency:e=>(r,t=e.currentCurrency)=>{const n=e.ratesForCurrencies[t];return(r*n)?.toFixed(o).replace(/\.?0+$/,"")}},actions:{addNewCurrency(e){e?(this.allCurrenciesInTable.push(e),localStorage.setItem("currencies",this.allCurrenciesInTable)):localStorage.getItem("currencies")?this.allCurrenciesInTable=[...localStorage.getItem("currencies").split(",")]:localStorage.setItem("currencies",this.allCurrenciesInTable)},async fetchAllCurrencies(){try{const e=await fetch("https://min-api.cryptocompare.com/data/all/coinlist"),r=await e.json();this.allCurrencies=Object.keys(r.Data)}catch(e){alert(e)}},changeCurrentCurrency(e){this.currentCurrency=e},async fetchRatesForCheckedCurrency(e,r){try{const t=await fetch(`https://min-api.cryptocompare.com/data/price?fsym=${e}&tsyms=${r}`);this.ratesForCurrencies=await t.json()}catch(t){alert(t)}},async fetchDataByCurrencyToPaint({buy:e,sell:r}){try{console.log("fetchDataByCurrencyToPaint",e,r),fetch(`https://min-api.cryptocompare.com/data/v2/histoday?fsym=${e}&tsym=${r}&limit=10`).then((e=>e.json())).then((t=>{this.chartData={labels:t.Data.Data.map((e=>new Date(1e3*e.time).toLocaleDateString())),secondCurrencyData:t.Data.Data.map((e=>e.open)),firstCurrencyData:t.Data.Data.map((e=>e.close)),firstCurrency:r,secondCurrency:e}})).catch((e=>console.error(e)))}catch(t){console.error("fetchDataByCurrencyToPaint"+t)}},async fetchRatesByCurrency(){try{this.addNewCurrency();const e=this.allCurrenciesInTable.join(","),r=await fetch(`https://min-api.cryptocompare.com/data/pricemultifull?tsyms=${this.currentCurrency}&fsyms=${e}`),t=await r.json(),n=Object.keys(t.DISPLAY).map((e=>{const r=t.DISPLAY[e][this.currentCurrency]["IMAGEURL"].includes("no-image"),n=r?null:`https://www.cryptocompare.com${t.DISPLAY[e][this.currentCurrency]["IMAGEURL"]}`,a=r?t.DISPLAY[e][this.currentCurrency]["FROMSYMBOL"]:null;return{name:e,rates:t.RAW[e][this.currentCurrency]["PRICE"],image:n,symbol:a}}));console.log(this.currenciesInTable,n),this.currenciesInTable=n}catch(e){console.error("fetchRatesByCurrency"+e)}}}}),u={class:"chart"};var d={__name:"CChart",setup(e){const r=i(),{getChartData:t}=(0,l.Jk)(r),n={labels:t.value.labels,datasets:[{label:`Currency ${t.value.firstCurrency}`,backgroundColor:"#f87979",data:t.value.firstCurrencyData},{label:`Currency ${t.value.secondCurrency}`,backgroundColor:"#7f7fff",data:t.value.secondCurrencyData}]},o={responsive:!0,maintainAspectRatio:!1},d=(0,c.iH)(null);return(0,a.bv)((()=>{new s.ZP(d.value,{type:"line",data:n,options:o})})),(e,r)=>((0,a.wg)(),(0,a.iD)("div",u,[(0,a._)("canvas",{ref_key:"canvasRef",ref:d,class:"chart__canvas",id:"chart"},null,512)]))}};const _=d;var p=_,m=t(7139);function y(){const e=(0,c.iH)(!1),r=()=>{e.value=!1},t=()=>{e.value=!0};return{isOpenModal:e,closeModal:r,openModal:t}}const v={key:0,class:"modal"},h={class:"modal__wrapper"},f={class:"modal__container"},C={class:"modal__header"},b=["onClick"],w={class:"modal__body"},g={key:0,class:"modal__buttons"},k=["onClick"],D={key:1,class:"modal__error"};var U={__name:"ModalComponent",props:{isOpen:Boolean},emits:["close"],setup(e,{emit:r}){const t=e,s=i(),o=(0,c.iH)(""),u=()=>{r("close")},{getFilteredCurrenciesNames:d}=(0,l.Jk)(s),{addNewCurrency:_,fetchAllCurrencies:p,fetchRatesByCurrency:y}=s,U=()=>{o.value.length<=2||p(o.value.toUpperCase())},S=e=>{_(e),y()};return(0,a.bv)((()=>{p()})),(e,r)=>{const s=(0,a.Q2)("click-outside");return(0,a.wg)(),(0,a.j4)(a.lR,{to:"#modal-container"},[t.isOpen?((0,a.wg)(),(0,a.iD)("div",v,[(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",h,[(0,a._)("div",f,[(0,a._)("div",C,[(0,a.WI)(e.$slots,"header"),(0,a._)("button",{onClick:(0,n.iM)(u,["stop"]),class:"modal__button modal__button--close"}," x ",8,b)]),(0,a._)("div",w,[(0,a.wy)((0,a._)("input",{style:{"text-transform":"uppercase"},type:"search",placeholder:"USDT","onUpdate:modelValue":r[0]||(r[0]=e=>o.value=e),onInput:r[1]||(r[1]=e=>U()),class:"modal__input"},null,544),[[n.nr,o.value]]),(0,c.SU)(d)(o.value.toUpperCase()).length?((0,a.wg)(),(0,a.iD)("div",g,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,c.SU)(d)(o.value.toUpperCase()),((e,r)=>((0,a.wg)(),(0,a.iD)("button",{type:"button",class:"modal__button modal__button--currency",onClick:(0,n.iM)((r=>S(e)),["stop"]),key:r},(0,m.zw)(e),9,k)))),128))])):(0,a.kq)("",!0),o.value.length>2&&!(0,c.SU)(d)(o.value.toUpperCase()).length?((0,a.wg)(),(0,a.iD)("span",D," No currency or this currency already in list ")):(0,a.kq)("",!0)])])])),[[s,u]])])):(0,a.kq)("",!0)])}}};const S=U;var T=S,I=t(4806),H=t.n(I);const R=["id","value","onChange","checked"],B=["for"];var O={__name:"UIRadio",props:{modelValue:{type:String,default:"USD"},list:{type:Array,required:!0}},emits:["change"],setup(e,{emit:r}){const t=e=>{r("change",e)};return(r,n)=>((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.list,((r,n)=>((0,a.wg)(),(0,a.iD)("div",{class:"radio",key:n},[(0,a._)("input",{type:"radio",name:"currency",id:`radio_${n}`,value:r,class:"radio__input",onChange:e=>t(r),checked:r===e.modelValue},null,40,R),(0,a._)("label",{for:`radio_${n}`,class:"radio__label"},(0,m.zw)(r),9,B)])))),128))}};const A=O;var j=A;const x={class:"currencies-block"},M={class:"currencies-block__controls"},F=["disabled"],P=(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",class:"currencies-block__icon"},[(0,a._)("path",{d:"M89.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L370.3 160H320c-17.7 0-32 14.3-32 32s14.3 32 32 32H447.5c0 0 0 0 0 0h.4c17.7 0 32-14.3 32-32V64c0-17.7-14.3-32-32-32s-32 14.3-32 32v51.2L398.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C57.2 122 39.6 150.7 28.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM23 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1V448c0 17.7 14.3 32 32 32s32-14.3 32-32V396.9l17.6 17.5 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.7c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L109.6 352H160c17.7 0 32-14.3 32-32s-14.3-32-32-32H32.4c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"})],-1),$=[P],z={class:"currencies-block__list"},L=(0,a._)("div",{class:"currencies-block__row"},[(0,a._)("span",{class:"currencies-block__name"},"Currency"),(0,a._)("span",{class:"currencies-block__value"},"Value")],-1),V={class:"currencies-block__name"},W=["src","alt"],q={key:1,class:"currencies-block__symbol"},Y={class:"currencies-block__value"};var E={__name:"CurrenciesBlock",setup(e){const r=5e3,{isOpenModal:t,openModal:n,closeModal:s}=y(),o=i(),u=(0,c.iH)("USD"),{getAllCurrenciesInTable:d,getCurrenciesToSetInTable:_}=(0,l.Jk)(o),{fetchRatesByCurrency:p,changeCurrentCurrency:v}=o,h=(0,c.iH)(!1),f=e=>{u.value=e,v(u),p()},C=(0,I.throttle)((()=>{b(),p()}),r),b=()=>{h.value=!0,setTimeout((()=>{h.value=!1}),r)};return(0,a.bv)((()=>{v(u.value),p()})),(e,r)=>((0,a.wg)(),(0,a.iD)("div",x,[(0,a._)("div",M,[(0,a.Wm)(j,{class:"currencies-block__radios",modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=e=>u.value=e),onChange:f,list:(0,c.SU)(_)},null,8,["modelValue","list"]),(0,a._)("button",{type:"button",class:(0,m.C_)(["currencies-block__button currencies-block__button--refresh",h.value&&"currencies-block__button--disabled"]),ref:"refreshButtonRef",onClick:r[1]||(r[1]=e=>(0,c.SU)(C)()),disabled:h.value},$,10,F)]),(0,a._)("div",z,[L,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,c.SU)(d),((e,r)=>((0,a.wg)(),(0,a.iD)("div",{class:"currencies-block__row",key:r},[(0,a._)("span",V,[e.image?((0,a.wg)(),(0,a.iD)("img",{key:0,width:"20px",height:"20px",class:"currencies-block__image",src:`${e.image}`,alt:e.name},null,8,W)):(0,a.kq)("",!0),e.symbol?((0,a.wg)(),(0,a.iD)("span",q,(0,m.zw)(e.symbol),1)):(0,a.kq)("",!0),(0,a.Uk)(" "+(0,m.zw)(e.name),1)]),(0,a._)("span",Y,(0,m.zw)(e.rates||"No data"),1)])))),128))]),(0,a.Wm)(T,{isOpen:(0,c.SU)(t),onClose:(0,c.SU)(s),class:"page__modal"},{header:(0,a.w5)((()=>[(0,a.Uk)("Add new currencies. Type currency name in english ")])),_:1},8,["isOpen","onClose"]),(0,a._)("button",{class:"currencies-block__button currencies-block__button--add-new",onClick:r[2]||(r[2]=(...e)=>(0,c.SU)(n)&&(0,c.SU)(n)(...e))}," Add new currency ")]))}};const N=E;var J=N;const K={class:"dropdown__header"},G=(0,a._)("svg",{class:"dropdown__arrow",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",id:"caret-down"},[(0,a._)("rect",{width:"256",height:"256",fill:"none"}),(0,a._)("polyline",{fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"16",points:"208 96 128 176 48 96"})],-1),Q=["onClick"];var X={__name:"UIDropdown",props:["list","default"],emits:["value"],setup(e,{emit:r}){const t=e,n=(0,c.iH)(t.list[0]),s=(0,c.iH)(!1),l=e=>{n.value=e,s.value=!1,r("selected",e)},o=()=>{s.value=!s.value},i=()=>{s.value=!1},u=e=>{l(e)};return(r,n)=>{const c=(0,a.Q2)("click-outside");return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{class:(0,m.C_)(["dropdown",s.value&&"dropdown--open"]),onClick:o},[(0,a._)("div",K,[(0,a.Uk)((0,m.zw)(t.default)+" ",1),G]),s.value?((0,a.wg)(),(0,a.iD)("ul",{key:0,class:"dropdown__list",onClick:o},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.list,((e,r)=>((0,a.wg)(),(0,a.iD)("li",{key:r,onClick:r=>u(e),class:"dropdown__item"},(0,m.zw)(e),9,Q)))),128))])):(0,a.kq)("",!0)],2)),[[c,i]])}}};const Z=X;var ee=Z;const re={class:"form"},te={class:"form__side"},ne=(0,a._)("span",{class:"form__title"}," I sell: ",-1),ae={key:0,class:"form__title form__title--error"},ce={class:"form__input-wrapper"},se={class:"form__side"},le=(0,a._)("span",{class:"form__title"}," I get: ",-1),oe={class:"form__input-wrapper"},ie={class:"form__amount"};var ue={__name:"CForm",setup(e){const r=i(),{getFormattedRatesForCurrency:t}=(0,l.Jk)(r),{fetchDataByCurrencyToPaint:s,fetchRatesForCheckedCurrency:o}=r,u=1e4,d=(0,c.iH)(1),_=(0,c.iH)(!1),p=["USD","EUR","UAH","GBP","BTC","ETH","BNB","XRP"],y=(0,c.qj)({sell:"USD",buy:"BTC"}),v=e=>{y.sell=e,o(e,p),s(y)},h=e=>{y.buy=e,s(y)};return(0,a.YP)(d,(async e=>{e>u&&(_.value=!0,d.value=u,setTimeout((()=>{_.value=!1}),2e3))})),(0,a.bv)((()=>{o(y.sell,p),s(y)})),(e,r)=>((0,a.wg)(),(0,a.iD)("div",re,[(0,a._)("div",te,[ne,(0,a.Wm)(n.uT,{name:"text-width",mode:"out-in"},{default:(0,a.w5)((()=>[_.value?((0,a.wg)(),(0,a.iD)("span",ae,"(maximum value "+(0,m.zw)(u)+")")):(0,a.kq)("",!0)])),_:1}),(0,a._)("div",ce,[(0,a.wy)((0,a._)("input",{type:"number",min:"0",max:u,"onUpdate:modelValue":r[0]||(r[0]=e=>d.value=e),class:"form__input"},null,512),[[n.nr,d.value,void 0,{number:!0}]])]),(0,a.Wm)(ee,{class:"form__dropdown",default:y.sell,list:p,onSelected:v},null,8,["default"])]),(0,a._)("div",se,[le,(0,a._)("div",oe,[(0,a._)("span",ie,(0,m.zw)((0,c.SU)(t)(d.value,y.buy)),1)]),(0,a.Wm)(ee,{class:"form__dropdown",default:y.buy,list:p,onSelected:h},null,8,["default"])])]))}};const de=ue;var _e=de;const pe={class:"page"};var me={__name:"App",setup(e){const r=i(),{getChartData:t}=(0,l.Jk)(r);return(e,r)=>((0,a.wg)(),(0,a.iD)("div",pe,[(0,a.Wm)(_e,{class:"page__form"}),(0,c.SU)(t).firstCurrencyData?((0,a.wg)(),(0,a.j4)(p,{class:"page__chart",key:(0,c.SU)(t)})):(0,a.kq)("",!0),(0,a.Wm)(J,{class:"page__currencies-block"})]))}};const ye=me;var ve=ye,he=t(3051),fe=t.n(he);const Ce=(0,l.WB)(),be=(0,n.ri)(ve);be.directive(fe().directive),be.use(Ce),be.use(H()),be.use(fe()),be.mount("#app")}},r={};function t(n){var a=r[n];if(void 0!==a)return a.exports;var c=r[n]={id:n,loaded:!1,exports:{}};return e[n].call(c.exports,c,c.exports,t),c.loaded=!0,c.exports}t.m=e,function(){var e=[];t.O=function(r,n,a,c){if(!n){var s=1/0;for(u=0;u<e.length;u++){n=e[u][0],a=e[u][1],c=e[u][2];for(var l=!0,o=0;o<n.length;o++)(!1&c||s>=c)&&Object.keys(t.O).every((function(e){return t.O[e](n[o])}))?n.splice(o--,1):(l=!1,c<s&&(s=c));if(l){e.splice(u--,1);var i=a();void 0!==i&&(r=i)}}return r}c=c||0;for(var u=e.length;u>0&&e[u-1][2]>c;u--)e[u]=e[u-1];e[u]=[n,a,c]}}(),function(){t.n=function(e){var r=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(r,{a:r}),r}}(),function(){t.d=function(e,r){for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)}}(),function(){t.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};t.O.j=function(r){return 0===e[r]};var r=function(r,n){var a,c,s=n[0],l=n[1],o=n[2],i=0;if(s.some((function(r){return 0!==e[r]}))){for(a in l)t.o(l,a)&&(t.m[a]=l[a]);if(o)var u=o(t)}for(r&&r(n);i<s.length;i++)c=s[i],t.o(e,c)&&e[c]&&e[c][0](),e[c]=0;return t.O(u)},n=self["webpackChunkcurrency_converter_vue3"]=self["webpackChunkcurrency_converter_vue3"]||[];n.forEach(r.bind(null,0)),n.push=r.bind(null,n.push.bind(n))}();var n=t.O(void 0,[998],(function(){return t(6398)}));n=t.O(n)})();
//# sourceMappingURL=app.ef9282bc.js.map